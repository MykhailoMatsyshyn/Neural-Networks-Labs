# –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó: –í–∞—Ä—ñ–∞–Ω—Ç 1 - RAG + Agent

## üìã –©–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

### ‚úÖ 1. RAG (Retrieval-Augmented Generation)

#### –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:

- **–í–µ–∫—Ç–æ—Ä–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö**: ChromaDB –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
- **–Ü–Ω–¥–µ–∫—Å–∞—Ü—ñ—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤**:
  - –§—É–Ω–∫—Ü—ñ—è `add_documents_to_rag()` –¥–æ–¥–∞—î –¥–æ–∫—É–º–µ–Ω—Ç–∏ –¥–æ ChromaDB
  - Endpoint `/upload_documents` –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
  - –î–æ–∫—É–º–µ–Ω—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏ (source, timestamp)
- **–ü–æ—à—É–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤**:
  - –§—É–Ω–∫—Ü—ñ—è `retrieve_relevant_docs()` –≤–∏–∫–æ–Ω—É—î —Å–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫
  - Endpoint `/search_documents` –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
  - –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ø–æ–≤–µ—Ä—Ç–∞—î 3 –Ω–∞–π—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ—à—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏
- **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ LLM**:
  - –†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –¥–æ–¥–∞—é—Ç—å—Å—è –¥–æ system prompt
  - LLM –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ –¥–ª—è —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

#### –Ø–∫ –ø—Ä–∞—Ü—é—î:

1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –¥–æ–∫—É–º–µ–Ω—Ç–∏ —á–µ—Ä–µ–∑ `/upload_documents`
2. ChromaDB –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î embeddings (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤–±—É–¥–æ–≤–∞–Ω—É –º–æ–¥–µ–ª—å)
3. –ü—Ä–∏ –∑–∞–ø–∏—Ç—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø–æ—à—É–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
4. –ó–Ω–∞–π–¥–µ–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –¥–æ–¥–∞—é—Ç—å—Å—è –¥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É LLM
5. LLM —Ñ–æ—Ä–º—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

**–ö–æ–¥:**

```python
# –Ü–Ω–¥–µ–∫—Å–∞—Ü—ñ—è
def add_documents_to_rag(docs: list):
    for i, doc in enumerate(docs):
        collection.add(
            documents=[doc["text"]],
            metadatas=[{"source": doc.get("source", "unknown")}],
            ids=[f"doc_{i}_{datetime.now().timestamp()}"],
        )

# –ü–æ—à—É–∫
def retrieve_relevant_docs(query: str, n_results: int = 3):
    results = collection.query(query_texts=[query], n_results=n_results)
    return results["documents"][0] if results["documents"] else []

# –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ chat endpoint
if request.settings.get("enableRAG", True):
    docs = retrieve_relevant_docs(request.message)
    if docs:
        context = "\n".join(docs)
        messages[0]["content"] += f"\n\nRelevant documents:\n{context}"
```

---

### ‚úÖ 2. Agent (–ê–≥–µ–Ω—Ç–Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)

#### –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:

- **Function Calling —á–µ—Ä–µ–∑ OpenAI API**:
  - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ OpenAI Function Calling API
  - LLM —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ –≤–∏—Ä—ñ—à—É—î, —è–∫—ñ —Ç—É–ª–∏ –≤–∏–∫–ª–∏–∫–∞—Ç–∏
  - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –º–Ω–æ–∂–∏–Ω–Ω–∏—Ö tool calls –≤ –æ–¥–Ω–æ–º—É –∑–∞–ø–∏—Ç—ñ
- **4 –∫–∞—Å—Ç–æ–º–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏**:
  1. `get_item_price` - –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ü—ñ–Ω–∏ —Ç–æ–≤–∞—Ä—É –∑ –∫–∞—Ç–∞–ª–æ–≥—É
  2. `calculate_shipping` - —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≤–∞—Ä—Ç–æ—Å—Ç—ñ –¥–æ—Å—Ç–∞–≤–∫–∏
  3. `book_meeting` - –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è –∑—É—Å—Ç—Ä—ñ—á–µ–π —á–µ—Ä–µ–∑ Google Calendar
  4. `send_email` - –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ email —á–µ—Ä–µ–∑ Gmail API
- **–î–∏–Ω–∞–º—ñ—á–Ω–µ –≤–º–∏–∫–∞–Ω–Ω—è/–≤–∏–º–∏–∫–∞–Ω–Ω—è —Ç—É–ª—ñ–≤**:
  - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –≤–º–∏–∫–∞—Ç–∏/–≤–∏–º–∏–∫–∞—Ç–∏ –∫–æ–∂–µ–Ω —Ç—É–ª –æ–∫—Ä–µ–º–æ —á–µ—Ä–µ–∑ UI
  - –§—É–Ω–∫—Ü—ñ—è `get_enabled_tools()` —Ñ—ñ–ª—å—Ç—Ä—É—î –¥–æ—Å—Ç—É–ø–Ω—ñ —Ç—É–ª–∏
- **System Prompt –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∞–≥–µ–Ω—Ç–æ–º**:
  - –î–µ—Ç–∞–ª—å–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó, –∫–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ç—É–ª–∏
  - –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
  - –ü—Ä–∞–≤–∏–ª–∞ –µ–∫—Å—Ç—Ä–∞–∫—Ü—ñ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É

#### –Ø–∫ –ø—Ä–∞—Ü—é—î:

1. LLM –æ—Ç—Ä–∏–º—É—î —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Ç—É–ª—ñ–≤ (tools schema)
2. –ê–Ω–∞–ª—ñ–∑—É—î –∑–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
3. –í–∏—Ä—ñ—à—É—î, —è–∫—ñ —Ç—É–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ
4. –í–∏–∫–ª–∏–∫–∞—î —Ñ—É–Ω–∫—Ü—ñ—ó –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
5. –û—Ç—Ä–∏–º—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
6. –§–æ—Ä–º—É—î —Ñ—ñ–Ω–∞–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

**–ö–æ–¥:**

```python
# –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç—É–ª—ñ–≤
all_tools_schema = [
    {
        "type": "function",
        "function": {
            "name": "get_item_price",
            "description": "Get product price from catalog...",
            "parameters": {...}
        }
    },
    # ... —ñ–Ω—à—ñ —Ç—É–ª–∏
]

# –í–∏–∫–ª–∏–∫ LLM –∑ —Ç—É–ª–∞–º–∏
response = client.chat.completions.create(
    model=default_model,
    messages=messages,
    tools=enabled_tools if enabled_tools else None,
    temperature=request.settings.get("temperature", 0.7),
)

# –û–±—Ä–æ–±–∫–∞ tool calls
if msg.tool_calls:
    for tool_call in msg.tool_calls:
        func_name = tool_call.function.name
        args = json.loads(tool_call.function.arguments)
        func = available_functions.get(func_name)
        result = func(**args)
        # –î–æ–¥–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
```

---

### ‚úÖ 3. –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∞ –ø–∞–º'—è—Ç—å (Conversation History)

#### –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:

- **In-memory –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó** –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ thread
- **–ü–æ–≤–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è —Ä–æ–∑–º–æ–≤–∏**:
  - User messages
  - Assistant messages
  - Tool calls
  - Tool responses
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –º—ñ–∂ –∑–∞–ø–∏—Ç–∞–º–∏**
- **Endpoints –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—î—é**:
  - `GET /history/{thread_id}` - –æ—Ç—Ä–∏–º–∞—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é
  - `DELETE /history/{thread_id}/clear` - –æ—á–∏—Å—Ç–∏—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é

---

### ‚úÖ 4. OpenAI API —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

#### –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:

- **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ OpenAI API** (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)
- **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ LM Studio** (–ª–æ–∫–∞–ª—å–Ω–∞ –º–æ–¥–µ–ª—å, –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
- **–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ñ—Å—Ç—å**:
  - Text chat
  - Image generation (DALL-E)
  - Image analysis (GPT-4 Vision)
- **Function Calling API** –¥–ª—è –∞–≥–µ–Ω—Ç–Ω–æ—ó –ª–æ–≥—ñ–∫–∏
- **Conversation API** –∑ –ø–æ–≤–Ω–æ—é —ñ—Å—Ç–æ—Ä—ñ—î—é

---

## üöÄ –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è OpenAI API

### 1. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è OpenAI Embeddings API –¥–ª—è RAG

**–ü–æ—Ç–æ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**: ChromaDB –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤–ª–∞—Å–Ω—É –º–æ–¥–µ–ª—å –¥–ª—è embeddings

**–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ OpenAI Embeddings API (`text-embedding-3-small` –∞–±–æ `text-embedding-3-large`)

```python
# –ó–∞–º—ñ—Å—Ç—å ChromaDB embeddings
from openai import OpenAI

def create_embeddings(texts: list):
    response = client.embeddings.create(
        model="text-embedding-3-small",
        input=texts
    )
    return [item.embedding for item in response.data]

# –ó–±–µ—Ä—ñ–≥–∞—Ç–∏ embeddings –≤ ChromaDB –∞–±–æ —ñ–Ω—à—ñ–π –≤–µ–∫—Ç–æ—Ä–Ω—ñ–π –ë–î
# –ü–µ—Ä–µ–≤–∞–≥–∏:
# - –ö—Ä–∞—â–∞ —è–∫—ñ—Å—Ç—å embeddings
# - –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å –∑ OpenAI –º–æ–¥–µ–ª—è–º–∏
# - –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ text-embedding-3-large –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
```

### 2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Assistants API

**–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ OpenAI Assistants API –∑–∞–º—ñ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ Function Calling

```python
# –°—Ç–≤–æ—Ä–∏—Ç–∏ Assistant –∑ —Ç—É–ª–∞–º–∏
assistant = client.beta.assistants.create(
    name="Enterprise Assistant",
    instructions=system_prompt,
    model="gpt-4o",
    tools=[
        {"type": "function", "function": get_item_price_schema},
        {"type": "function", "function": calculate_shipping_schema},
        # ...
    ],
    tool_resources={
        "file_search": {
            "vector_store_ids": [vector_store_id]  # –î–ª—è RAG
        }
    }
)

# –ü–µ—Ä–µ–≤–∞–≥–∏:
# - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è thread'–∞–º–∏
# - –í–±—É–¥–æ–≤–∞–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ RAG —á–µ—Ä–µ–∑ File Search
# - Streaming responses
# - –ë—ñ–ª—å—à –Ω–∞–¥—ñ–π–Ω–∞ –æ–±—Ä–æ–±–∫–∞ tool calls
```

### 3. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è File Search –¥–ª—è RAG

**–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤–±—É–¥–æ–≤–∞–Ω–∏–π File Search –∑–∞–º—ñ—Å—Ç—å ChromaDB

```python
# –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–∞–π–ª–∏ –≤ OpenAI
file = client.files.create(
    file=open("document.pdf", "rb"),
    purpose="assistants"
)

# –°—Ç–≤–æ—Ä–∏—Ç–∏ Vector Store
vector_store = client.beta.vector_stores.create(
    name="Documents",
    file_ids=[file.id]
)

# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤ Assistant
assistant = client.beta.assistants.create(
    tools=[{"type": "file_search"}],
    tool_resources={
        "file_search": {
            "vector_store_ids": [vector_store.id]
        }
    }
)

# –ü–µ—Ä–µ–≤–∞–≥–∏:
# - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—è
# - –ö—Ä–∞—â–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Assistant API
# - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ PDF, DOCX, TXT —Ç–∞ —ñ–Ω—à–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤
```

### 4. Streaming Responses

**–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è**: –î–æ–¥–∞—Ç–∏ streaming –¥–ª—è –∫—Ä–∞—â–æ–≥–æ UX

```python
stream = client.chat.completions.create(
    model="gpt-4o",
    messages=messages,
    tools=enabled_tools,
    stream=True
)

for chunk in stream:
    if chunk.choices[0].delta.content:
        yield chunk.choices[0].delta.content
```

### 5. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è GPT-4o –¥–ª—è –∫—Ä–∞—â–æ—ó —è–∫–æ—Å—Ç—ñ

**–ü–æ—Ç–æ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `gpt-4o-mini` –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

**–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è**:

- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `gpt-4o` –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
- `gpt-4o-mini` –¥–ª—è –ø—Ä–æ—Å—Ç–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ (–µ–∫–æ–Ω–æ–º—ñ—è)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ –∑–∞–ø–∏—Ç—É

### 6. Vision API –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

**–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ GPT-4 Vision –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –∑–æ–±—Ä–∞–∂–µ–Ω—å –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

```python
# –ê–Ω–∞–ª—ñ–∑ PDF/–∑–æ–±—Ä–∞–∂–µ–Ω—å –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
response = client.chat.completions.create(
    model="gpt-4o",
    messages=[
        {
            "role": "user",
            "content": [
                {"type": "text", "text": "–ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–π —Ü–µ–π –¥–æ–∫—É–º–µ–Ω—Ç"},
                {"type": "image_url", "image_url": {"url": f"data:image/jpeg;base64,{base64_image}"}}
            ]
        }
    ]
)
```

---

## üìä –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è: –ü—Ä–æ—Å—Ç–∏–π LLM vs RAG + Agent

### –ó–∞–¥–∞—á—ñ, —è–∫—ñ –Ω–∞—à –∞—Å–∏—Å—Ç–µ–Ω—Ç –≤–∏—Ä—ñ—à—É—î –∫—Ä–∞—â–µ:

#### 1. **–ü–∏—Ç–∞–Ω–Ω—è –ø—Ä–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏**

- **–ü—Ä–æ—Å—Ç–∏–π LLM**: –ú–æ–∂–µ –Ω–∞–¥–∞—Ç–∏ –∑–∞–≥–∞–ª—å–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é, –∞–ª–µ –Ω–µ –∑–Ω–∞—î –ø—Ä–æ –≤–∞—à—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏
- **RAG + Agent**: –®—É–∫–∞—î —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏ –∑ –≤–∞—à–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ —ñ –Ω–∞–¥–∞—î —Ç–æ—á–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é

**–ü—Ä–∏–∫–ª–∞–¥**: "–©–æ –Ω–∞–ø–∏—Å–∞–Ω–æ –≤ –¥–æ–≥–æ–≤–æ—Ä—ñ –ø—Ä–æ —Ç–µ—Ä–º—ñ–Ω–∏ –æ–ø–ª–∞—Ç–∏?"

- RAG –∑–Ω–∞–π–¥–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∑ –¥–æ–≥–æ–≤–æ—Ä—É
- LLM —Å—Ñ–æ—Ä–º—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∑–Ω–∞–π–¥–µ–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç—É

#### 2. **–í–∏–∫–æ–Ω–∞–Ω–Ω—è –¥—ñ–π (Actions)**

- **–ü—Ä–æ—Å—Ç–∏–π LLM**: –ú–æ–∂–µ –ª–∏—à–µ –Ω–∞–ø–∏—Å–∞—Ç–∏ —Ç–µ–∫—Å—Ç, –∞–ª–µ –Ω–µ –≤–∏–∫–æ–Ω–∞—Ç–∏ –¥—ñ—é
- **RAG + Agent**: –ú–æ–∂–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—ó (–≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ email, –∑–∞–±—Ä–æ–Ω—é–≤–∞—Ç–∏ –∑—É—Å—Ç—Ä—ñ—á)

**–ü—Ä–∏–∫–ª–∞–¥**: "–ù–∞–¥—ñ—à–ª–∏ –ª–∏—Å—Ç–∞ –Ω–∞ mykhailo@example.com –ø—Ä–æ –∑—É—Å—Ç—Ä—ñ—á"

- Agent –≤–∏–∫–ª–∏–∫–∞—î `send_email` tool
- Email —Ä–µ–∞–ª—å–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è —á–µ—Ä–µ–∑ Gmail API

#### 3. **–ö–æ–º–ø–ª–µ–∫—Å–Ω—ñ –±–∞–≥–∞—Ç–æ–∫—Ä–æ–∫–æ–≤—ñ –∑–∞–¥–∞—á—ñ**

- **–ü—Ä–æ—Å—Ç–∏–π LLM**: –ú–æ–∂–µ –∑–∞–ø—Ä–æ–ø–æ–Ω—É–≤–∞—Ç–∏ –ø–ª–∞–Ω, –∞–ª–µ –Ω–µ –≤–∏–∫–æ–Ω–∞—Ç–∏ –π–æ–≥–æ
- **RAG + Agent**: –í–∏–∫–æ–Ω—É—î –≤—Å—ñ –∫—Ä–æ–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

**–ü—Ä–∏–∫–ª–∞–¥**: "–ü–µ—Ä–µ–≤—ñ—Ä —Ü—ñ–Ω—É –Ω–∞ MacBook, –ø–æ—Ä–∞—Ö—É–π –¥–æ—Å—Ç–∞–≤–∫—É, –∑–∞–±—Ä–æ–Ω—é–π –Ω–∞—Ä–∞–¥—É —ñ –≤—ñ–¥–ø—Ä–∞–≤ –ª–∏—Å—Ç–∞"

- Agent –≤–∏–∫–ª–∏–∫–∞—î `get_item_price`
- –ü–æ—Ç—ñ–º `calculate_shipping`
- –ü–æ—Ç—ñ–º `book_meeting`
- –ü–æ—Ç—ñ–º `send_email`
- –í—Å—ñ –¥—ñ—ó –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

#### 4. **–ê–∫—Ç—É–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –∑ –∫–∞—Ç–∞–ª–æ–≥—ñ–≤/–±–∞–∑ –¥–∞–Ω–∏—Ö**

- **–ü—Ä–æ—Å—Ç–∏–π LLM**: –ù–µ –º–∞—î –¥–æ—Å—Ç—É–ø—É –¥–æ –∞–∫—Ç—É–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- **RAG + Agent**: –ú–æ–∂–µ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ñ —Ü—ñ–Ω–∏, —Ä–æ–∑—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫—É

**–ü—Ä–∏–∫–ª–∞–¥**: "–°–∫—ñ–ª—å–∫–∏ –∫–æ—à—Ç—É—î iPhone 15?"

- Agent –≤–∏–∫–ª–∏–∫–∞—î `get_item_price("iphone 15")`
- –ü–æ–≤–µ—Ä—Ç–∞—î –∞–∫—Ç—É–∞–ª—å–Ω—É —Ü—ñ–Ω—É –∑ –∫–∞—Ç–∞–ª–æ–≥—É

---

## üìù –í–∏—Å–Ω–æ–≤–∫–∏

### –©–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:

‚úÖ RAG —á–µ—Ä–µ–∑ ChromaDB  
‚úÖ Agent —á–µ—Ä–µ–∑ OpenAI Function Calling  
‚úÖ 4 –∫–∞—Å—Ç–æ–º–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏  
‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∞ –ø–∞–º'—è—Ç—å (conversation history)  
‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Google API  
‚úÖ –ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ñ—Å—Ç—å (text, image gen, image analysis)

### –©–æ –º–æ–∂–Ω–∞ –ø–æ–∫—Ä–∞—â–∏—Ç–∏:

üîß –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è OpenAI Embeddings API –¥–ª—è RAG  
üîß –ü–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ Assistants API  
üîß –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è File Search –∑–∞–º—ñ—Å—Ç—å ChromaDB  
üîß Streaming responses  
üîß –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è GPT-4o –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤  
üîß Vision API –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

### –ü–µ—Ä–µ–≤–∞–≥–∏ –ø–æ—Ç–æ—á–Ω–æ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:

- ‚úÖ –ü—Ä–∞—Ü—é—î –∑ OpenAI API —Ç–∞ LM Studio
- ‚úÖ –ì–Ω—É—á–∫–µ –≤–º–∏–∫–∞–Ω–Ω—è/–≤–∏–º–∏–∫–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–π
- ‚úÖ –ü–æ–≤–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è —Ä–æ–∑–º–æ–≤–∏
- ‚úÖ –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏–º–∏ —Ç—É–ª–∞–º–∏
- ‚úÖ –ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ñ—Å—Ç—å

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –∑–≤—ñ—Ç—É

1. **–û–ø–∏—à—ñ—Ç—å –ø—Ä–æ—Ü–µ—Å —ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—ó**:

   - ChromaDB –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î embeddings –ø—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤–±—É–¥–æ–≤–∞–Ω–∞ –º–æ–¥–µ–ª—å embeddings
   - –î–æ–∫—É–º–µ–Ω—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏

2. **–û–ø–∏—à—ñ—Ç—å –º–µ—Ö–∞–Ω—ñ–∑–º –∞–≥–µ–Ω—Ç–∞**:

   - OpenAI Function Calling API
   - LLM –∞–Ω–∞–ª—ñ–∑—É—î –∑–∞–ø–∏—Ç —ñ –≤–∏—Ä—ñ—à—É—î, —è–∫—ñ —Ç—É–ª–∏ –≤–∏–∫–ª–∏–∫–∞—Ç–∏
   - System prompt –∫–µ—Ä—É—î –ø–æ–≤–µ–¥—ñ–Ω–∫–æ—é –∞–≥–µ–Ω—Ç–∞
   - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –º–Ω–æ–∂–∏–Ω–Ω–∏—Ö tool calls

3. **–ù–∞–≤–µ–¥—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥–∏ –∑–∞–¥–∞—á**:

   - –ü–æ—à—É–∫ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö (RAG)
   - –í–∏–∫–æ–Ω–∞–Ω–Ω—è –¥—ñ–π (Agent)
   - –ö–æ–º–ø–ª–µ–∫—Å–Ω—ñ –±–∞–≥–∞—Ç–æ–∫—Ä–æ–∫–æ–≤—ñ –∑–∞–¥–∞—á—ñ

4. **–ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ –∑ –ø—Ä–æ—Å—Ç–∏–º LLM**:
   - RAG –¥–∞—î –¥–æ—Å—Ç—É–ø –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
   - Agent –≤–∏–∫–æ–Ω—É—î —Ä–µ–∞–ª—å–Ω—ñ –¥—ñ—ó
   - –ö–æ–º–ø–ª–µ–∫—Å–Ω—ñ –∑–∞–¥–∞—á—ñ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
